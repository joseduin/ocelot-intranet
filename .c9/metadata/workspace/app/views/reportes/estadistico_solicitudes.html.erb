{"filter":false,"title":"estadistico_solicitudes.html.erb","tooltip":"/app/views/reportes/estadistico_solicitudes.html.erb","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":855,"column":0},"action":"remove","lines":["<% content_for :title, 'Reportes' %>","<%= render partial: 'partial/cabecera', ","        locals: {cabecera: {","            titulo: 'Estadistico Solicitudes',","            navegacion: [","                {titulo: 'Inicio', ruta: root_path},","                {titulo: 'estadistico_solicitudes', ruta: root_path}]","             }} %>","","<div class=\"wrapper wrapper-content\">","    <div class=\"row\">","        <div class=\"col-lg-12\">","            <div class=\"ibox float-e-margins\">","                <div class=\"ibox-content text-center p-md\">","            ","                    <!--<%=render partial: 'partial/boton_right', ","                    locals: {botones: [","                         {elemento: 'a_blank', titulo: '<i class=\"fa fa-print\"></i> Exportar', ruta: estadistico_solicitudes_exportar_path, clase: 'btn btn-info'}]","                    } %> -->","                    ","                    <div class=\"row\">","                         <a class=\"navbar-minimalize minimalize-styl-2\" style=\"margin: auto;\">","                               <%= image_tag ( \"ocelot/ocelot-imagotipo.png\"), :style =>'width: 150px;' %> ","                             <address>","                                  <!--<strong>OCELOT, C.A.</strong><br>-->","                                     Avenida Lara, Barquisimeto<br>","                                     Estado Lara, 3001<br>","                                     <abbr title=\"Teléfono\">Tlf:</abbr> 02515555555","                              </address>","                         ","                         ","                          </a><br>","                            ","                                        <!--    <div class=\"col-sm-4\">","                                      ","                                                <address>","                                                    <!--<strong>OCELOT, C.A.</strong><br>","                                                    Avenida Lara, Barquisimeto<br>","                                                    Estado Lara, 3001<br>","                                                    <abbr title=\"Teléfono\">Tlf:</abbr> 02515555555","                                                </address>","                                                ","                                            </div> -->","            ","                                            <div class=\"col-sm-9 text-right\">","                                               <!-- <h4>Presupuesto Nro.</h4>","                                                <h4 class=\"text-navy\">P-00056-00</h4>","                                                <span>Dirigido A:</span>","                                               <address>","                                                    <strong>Empresas A, C.A.</strong><br>","                                                    Avenida Los Leones, Barquisimeto<br>","                                                    Estado Lara, 3001<br>","                                                    <abbr title=\"Teléfono\">Tlf:</abbr> 02519999999","                                                </address>-->","                                                <p>","                                                    <span><strong>Fecha Emisión:</strong>  ","                                                    28/03/2017</span><br/>","                                                    <!--<span><strong></strong> March 24, 2014</span>-->","                                                </p>","                                            </div>","                                        </div>","                    <!-- iniciocontenido reporte -->","            ","            ","                    <form class=\"form-horizontal\" id=\"form1\">","                        <div class=\"form-group\">","                            <label class=\"col-sm-2 control-label\">Categoria del Servicio</label>","                            <div class=\"col-sm-4\">","                                    <select data-placeholder=\"Seleccione un Servicio...\" class=\"chosen-select\" tabindex=\"2\" name=\"categoria\" id=\"categoria\">","                                        <option value=\"\">Seleccione</option>","                                <% @categoria.try(:each) do |opt| %>","                                    <option value=\"<%= opt.id %>\"><%= opt.descripcion %></option>","                                <%  end %>","                                        ","                                    </select>","                            </div>","                            <label class=\"col-sm-2 control-label\"> Tipo de Servicio</label>","                            <div class=\"col-sm-4\">","                                <select data-placeholder=\"Seleccione el Tipo de Servicio...\" class=\"chosen-select\" tabindex=\"2\" name=\"tipo\" id=\"tipo\">","                                    <option value=\"\">Seleccione</option>","                                    ","                                    ","                                </select>","                            </div>","                        </div>","                        ","                        <div class=\"form-group\">","                         <label class=\"col-sm-2 control-label\">Estado</label>   ","                         <div class=\"col-sm-4\">","                                    <select data-placeholder=\"Seleccione un Servicio...\" class=\"chosen-select\" tabindex=\"2\" name=\"estado\" id=\"estado\">","                                        <option value=\"\">seleccione</option>","                                    <% @estado.try(:each) do |opt| %>","                                    <option value=\"<%= opt.id %>\"><%= opt.descripcion %></option>","                                <%  end %>","                                    ","                                    </select>","                         </div>","                            <!--<label class=\"col-sm-2 control-label\">Municipio</label>","                            <div class=\"col-offset-sm-2 col-sm-4\">","                                    <select data-placeholder=\"Seleccione un Servicio...\" class=\"chosen-select\" tabindex=\"2\" name=\"municipio\" id=\"municipio\">","                                        <option value=\"\">seleccione</option>","","                                        ","                                    </select>","                            </div>-->","                             <div class=\"form-group\">","                            <label class=\"col-sm-2 control-label\">Ciudad</label>","                             <div class=\"col-sm-4\">","                                    <select data-placeholder=\"Seleccione un Servicio...\" class=\"chosen-select\" tabindex=\"2\" name=\"ciudad\" id=\"ciudad\">","                                        <option value=\"\">seleccione</option>","                                        ","                                        ","                                    </select>","                            </div>","                            <label class=\"col-sm-2 control-label\"></label>","                            <!--div class=\"col-sm-4\">","                                    <select data-placeholder=\"Seleccione un Servicio...\" class=\"chosen-select\"tabindex=\"2\">","                                        <option value=\"\">Parroquia</option>","                                        <option value=\"United States\">Instalación</option>","                                        <option value=\"United Kingdom\">Mantenimiento</option>","                                        <option value=\"Afghanistan\">Reparación</option>","                                        ","                                    </select>","                            </div>-->","                                ","                            </div>","                            </div>","                            ","                            ","                            ","","                            <!--<div class=\"form-group\">","                                <label class=\"col-sm-2 control-label\"></label>","                                                                                 <div class=\"col-sm-4\">","                                    <select data-placeholder=\"Seleccione un Servicio...\" class=\"chosen-select\"tabindex=\"2\">","                                        <option value=\"\">Sector</option>","                                        <option value=\"United States\">Instalación</option>","                                        <option value=\"United Kingdom\">Mantenimiento</option>","                                        <option value=\"Afghanistan\">Reparación</option>","                                        ","                                    </select>","                            </div>    ","                                ","                                ","                             </div>-->","                         ","                                                 <div class=\"form-group\" id=\"data_5\">","                            <label class=\"col-sm-2 control-label\">Rango de Consulta</label>","                            <div class=\"col-sm-10\">","                                <div class=\"input-daterange input-group col-sm-12\" id=\"datepicker\">","                                    <span class=\"input-group-addon\">Desde</span>","                                    <input type=\"text\" class=\"input-sm form-control date\" name=\"start\" value=\"12/03/2017\" id=\"start\">","                                    <span class=\"input-group-addon\">Hasta</span>","                                    <input type=\"text\" class=\"input-sm form-control date\" name=\"end\" value=\"12/05/2017\" id=\"end\"/>","                                </div>","                            </div>","                            ","                                                    <div class=\"col-sm-12\">","                                <%=render partial: 'partial/boton_right', ","                                locals: {botones: [","                                 {elemento: 'button', id:'generar',titulo: '<i class=\"fa fa-bar-chart\"></i> Generar', clase: 'btn btn-success',contenido:'<i class=\"fa fa-bar-chart\"></i> Generar'}]","                                } %> ","                        </div>","                            ","                            ","                        </div>    ","","                        </div>","                        ","                        ","  ","","                    </form>","                    <br>","                    ","                    <div>","                        <div class=\"row\">","                          ","                            <div class=\"col-lg-12 grafico\">","                            <div class=\"ibox float-e-margins\">","                                <div class=\"ibox-title\">","                                    <h5>Comparativo de Solicitudes por Servicio</h5>","                             <div class=\"ibox-tools\">","                            <a class=\"collapse-link\">","                                <i class=\"fa fa-chevron-up\"></i>","                            </a>","                            <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\">","                                <i class=\"fa fa-wrench\"></i>","                            </a>","                            <ul class=\"dropdown-menu dropdown-user\">","                                <li><a href=\"#\">Config option 1</a>","                                </li>","                                <li><a href=\"#\">Config option 2</a>","                                </li>","                            </ul>","                            <a class=\"close-link\">","                                <i class=\"fa fa-times\"></i>","                            </a>","                        </div>","                                </div> ","                                <div class=\"ibox-content\">","","                                       <div id=\"morris-bar-chart\"></div>  ","                                            ","                                </div>","                                ","                                ","                                <!--Inicio de la Tabla-->","                                ","                                        <div class=\"wrapper wrapper-content animated fadeInRight\">","            <div class=\"row\">","                <div class=\"col-lg-13\">","                <div class=\"ibox float-e-margins\">","                    <div class=\"ibox-title\">","                        <h5>Datos</h5>","                        <div class=\"ibox-tools\">","                            <a class=\"collapse-link\">","                                <i class=\"fa fa-chevron-up\"></i>","                            </a>","                            <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\">","                                <i class=\"fa fa-wrench\"></i>","                            </a>","                            <ul class=\"dropdown-menu dropdown-user\">","                                <li><a href=\"#\">Config option 1</a>","                                </li>","                                <li><a href=\"#\">Config option 2</a>","                                </li>","                            </ul>","                            <a class=\"close-link\">","                                <i class=\"fa fa-times\"></i>","                            </a>","                        </div>","                    </div>","                    <div class=\"ibox-content\">","","                        <table class=\"table\" id=\"tabla-resultados\">","                            <thead>","                            <tr>","                                <th>Codigo de Servicio</th>","                                <th>Servicio</th>","                                <th>Solicitudes Aprobadas</th>","                                <th>Solicitudes Rechazadas</th>","                                <th>Total de Solicitudes por Servicio</th>","                            </tr>","                            </thead>","                            <tbody>","                            ","                            ","                            </tbody>","                        </table>","","                    </div>","                </div>","            </div>","                                ","                                ","                                ","                                ","                                ","                                ","                                <!-- fin de la tabla-->","                                ","                                ","                                ","                                  ","                                    <%=render partial: 'partial/boton_right', ","                    locals: {botones: [","                         {elemento: 'a_blank', titulo: '<i class=\"fa fa-print\"></i> Exportar', ruta: estadistico_solicitudes_exportar_path, clase: 'btn btn-info'}]","                    } %>  ","                            </div>","                        </div>","                        ","                    </div>","                        ","            ","                    </div>","                    ","                    </div>","                    ","                </div>","            </div>        ","        </div>"," ","","","  ","<% content_for :javascript do %>","<script type=\"text/javascript\">","","    $(function() {","        datePickerMultiple();","        chosen();","        cambiarChosenCategoria();","        cambiarChosenEstado();","        $( \".date\" ).datepicker( \"option\", \"dateFormat\", 'yy-mm-dd' );","        ","        /*$(\".grafico\").hide();","        $(\".btn-success\").click(function(){","            $(\".grafico\").show();","        });*/","        ","    });","    var cambiarChosenCategoria = function(){","   $('#categoria').on('change', function(e) {","        $.ajax({","             url:\"/buscarTipoInmueblePorCategoria\",","                data:{","                    url: \"tipoServicio/categoria/\" + $(this).val() +\"/buscarPorCategoria\"","                },","            success:function(data){","                 console.log(data.tipoInmueble);","                    /*toastr.success(data.tipoInmueble[0].id);*/","                    $(\"#tipo\").empty().trigger(\"chosen:updated\");","                    $(\"#tipo\").append(\"<option value>Selecccione</option>\");","                     $.each(data.tipoInmueble, function(key,val) {  ","                        console.log(val.descripcion);","                        $(\"#tipo\").append(\"<option value=\\\"\"+val.id+\"\\\">\"+val.descripcion+\"</option>\");","                    }); ","                    $(\"#tipo\").trigger(\"chosen:updated\"); // para mandar a ejecutar la carga","            },","              error:function(data){","                    toastr.error(data.message, \"Oops!\");","                }","        });//fin ajax","    ","    }); //fin funcion ","","    ","}  // fin chosen categoria ","var cambiarChosenEstado = function() {","    $('#estado').on('change', function(e) {","        $.ajax({","        url:\"/buscarCiudadPorEstado\",","                data:{","                    url: \"ciudad/estado/\" + $(this).val() +\"/buscarPorEstado\"","                },","                success:function(data){","                    console.log(data.ciudad);","                    //toastr.success(data.ciudad[0].id);","                    $(\"#ciudad\").empty().trigger(\"chosen:updated\");","                    $(\"#ciudad\").append(\"<option value>Selecccione</option>\");","                    $.each(data.ciudad, function(key,val) {  ","                        console.log(val.descripcion);","                       // $(\"#ciudad\").append(\"<option></option>\");","                ","                        $(\"#ciudad\").append(\"<option value=\\\"\"+val.id+\"\\\">\"+val.descripcion+\"</option>\");","                    }); ","                    $(\"#ciudad\").trigger(\"chosen:updated\");","                    ","                },             ","                error:function(data){","                    toastr.error(data.message, \"Oops!\");","                }","            });","        });    ","  "," }//fin","  cambiarChosenCiudad = function(){","    console.log(\"ayyyyy\");","    $('#ciudad').on('change',function(e){","    alert(\"Cambio\");","       $.ajax({","           ","           url:\"/buscarMunicipioPorCiudad\",","          data:{","                    url: \"municipio/ciudad/\" + $(this).val() +\"/buscarPorCiudad\"","                },","            success:function(data){","                console.log(data.municipio);","                toastr.success(data.municipio[0].id);","                 $(\"#municipio\").empty().trigger(\"chosen:updated\");","                 $(\"#municipio\").append(\"<option value>Selecccione</option>\");","                   $.each(data.municipio, function(key,val) {","                       console.log(val.descripcion);","                       ","                       $(\"#municipio\").append(\"<option value=\\\"\"+val.id+\"\\\">\"+val.descripcion+\"</option>\");","                       ","                   });","                   ","                   $(\"#municipio\").trigger(\"chosen:updated\");","                 ","            },    ","            ","            error:function(data){","                    toastr.error(data.message, \"Oops!\");","                ","            }","            ","                ","       });","        ","    });","    ","    ","} //Fin function ","","","","","    var datePickerMultiple = function() {","        $('.date').datepicker({","            language: 'es',","            startView: 2,","            todayBtn: \"linked\",","            keyboardNavigation: false,","            forceParse: false,","            dateFormat: 'yy-mm-dd', ","            autoclose: true","        });","    }","    var chosen = function() {","        $(\".chosen-select\").chosen(chosen_language);","    }","        $('#data_5 .input-daterange').datepicker({","                keyboardNavigation: false,","                forceParse: false,","                autoclose: true","            });","            ","            ","            ","            ","            ","            ","            $(function () {","                ","                ","    var lineData = {","        labels: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\"],","        datasets: [","            {","                label: \"Example dataset\",","                fillColor: \"rgba(220,220,220,0.5)\",","                strokeColor: \"rgba(220,220,220,1)\",","                pointColor: \"rgba(220,220,220,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(220,220,220,1)\",","                data: [65, 59, 80, 81, 56, 55, 40]","            },","            {","                label: \"Example dataset\",","                fillColor: \"rgba(26,179,148,0.5)\",","                strokeColor: \"rgba(26,179,148,0.7)\",","                pointColor: \"rgba(26,179,148,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(26,179,148,1)\",","                data: [28, 48, 40, 19, 86, 27, 90]","            }","        ]","    };","","    var lineOptions = {","        scaleShowGridLines: true,","        scaleGridLineColor: \"rgba(0,0,0,.05)\",","        scaleGridLineWidth: 1,","        bezierCurve: true,","        bezierCurveTension: 0.4,","        pointDot: true,","        pointDotRadius: 4,","        pointDotStrokeWidth: 1,","        pointHitDetectionRadius: 20,","        datasetStroke: true,","        datasetStrokeWidth: 2,","        datasetFill: true,","        responsive: true,","    };","","","    var ctx = document.getElementById(\"lineChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Line(lineData, lineOptions);","","    var barData = {","        labels: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\"],","        datasets: [","            {","                label: \"My First dataset\",","                fillColor: \"rgba(220,220,220,0.5)\",","                strokeColor: \"rgba(220,220,220,0.8)\",","                highlightFill: \"rgba(220,220,220,0.75)\",","                highlightStroke: \"rgba(220,220,220,1)\",","                data: [65, 59, 80, 81, 56, 55, 40]","            },","            {","                label: \"My Second dataset\",","                fillColor: \"rgba(26,179,148,0.5)\",","                strokeColor: \"rgba(26,179,148,0.8)\",","                highlightFill: \"rgba(26,179,148,0.75)\",","                highlightStroke: \"rgba(26,179,148,1)\",","                data: [28, 48, 40, 19, 86, 27, 90]","            }","        ]","    };","","    var barOptions = {","        scaleBeginAtZero: true,","        scaleShowGridLines: true,","        scaleGridLineColor: \"rgba(0,0,0,.05)\",","        scaleGridLineWidth: 1,","        barShowStroke: true,","        barStrokeWidth: 2,","        barValueSpacing: 5,","        barDatasetSpacing: 1,","        responsive: true,","    }","","","    var ctx = document.getElementById(\"barChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Bar(barData, barOptions);","","    var polarData = [","        {","            value: 300,","            color: \"#a3e1d4\",","            highlight: \"#1ab394\",","            label: \"App\"","        },","        {","            value: 140,","            color: \"#dedede\",","            highlight: \"#1ab394\",","            label: \"Software\"","        },","        {","            value: 200,","            color: \"#b5b8cf\",","            highlight: \"#1ab394\",","            label: \"Laptop\"","        }","    ];","","    var polarOptions = {","        scaleShowLabelBackdrop: true,","        scaleBackdropColor: \"rgba(255,255,255,0.75)\",","        scaleBeginAtZero: true,","        scaleBackdropPaddingY: 1,","        scaleBackdropPaddingX: 1,","        scaleShowLine: true,","        segmentShowStroke: true,","        segmentStrokeColor: \"#fff\",","        segmentStrokeWidth: 2,","        animationSteps: 100,","        animationEasing: \"easeOutBounce\",","        animateRotate: true,","        animateScale: false,","        responsive: true,","","    };","","    var ctx = document.getElementById(\"polarChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).PolarArea(polarData, polarOptions);","","    var doughnutData = [","        {","            value: 300,","            color: \"#a3e1d4\",","            highlight: \"#1ab394\",","            label: \"App\"","        },","        {","            value: 50,","            color: \"#dedede\",","            highlight: \"#1ab394\",","            label: \"Software\"","        },","        {","            value: 100,","            color: \"#b5b8cf\",","            highlight: \"#1ab394\",","            label: \"Laptop\"","        }","    ];","","    var doughnutOptions = {","        segmentShowStroke: true,","        segmentStrokeColor: \"#fff\",","        segmentStrokeWidth: 2,","        percentageInnerCutout: 45, // This is 0 for Pie charts","        animationSteps: 100,","        animationEasing: \"easeOutBounce\",","        animateRotate: true,","        animateScale: false,","        responsive: true,","    };","","","    var ctx = document.getElementById(\"doughnutChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Doughnut(doughnutData, doughnutOptions);","","","    var radarData = {","        labels: [\"Eating\", \"Drinking\", \"Sleeping\", \"Designing\", \"Coding\", \"Cycling\", \"Running\"],","        datasets: [","            {","                label: \"My First dataset\",","                fillColor: \"rgba(220,220,220,0.2)\",","                strokeColor: \"rgba(220,220,220,1)\",","                pointColor: \"rgba(220,220,220,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(220,220,220,1)\",","                data: [65, 59, 90, 81, 56, 55, 40]","            },","            {","                label: \"My Second dataset\",","                fillColor: \"rgba(26,179,148,0.2)\",","                strokeColor: \"rgba(26,179,148,1)\",","                pointColor: \"rgba(26,179,148,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(151,187,205,1)\",","                data: [28, 48, 40, 19, 96, 27, 100]","            }","        ]","    };","","    var radarOptions = {","        scaleShowLine: true,","        angleShowLineOut: true,","        scaleShowLabels: false,","        scaleBeginAtZero: true,","        angleLineColor: \"rgba(0,0,0,.1)\",","        angleLineWidth: 1,","        pointLabelFontFamily: \"'Arial'\",","        pointLabelFontStyle: \"normal\",","        pointLabelFontSize: 10,","        pointLabelFontColor: \"#666\",","        pointDot: true,","        pointDotRadius: 3,","        pointDotStrokeWidth: 1,","        pointHitDetectionRadius: 20,","        datasetStroke: true,","        datasetStrokeWidth: 2,","        datasetFill: true,","        responsive: true,","    }","","    var ctx = document.getElementById(\"radarChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Radar(radarData, radarOptions);","","});","            ","            ","            ","            ","    </script>","    <script>","","        $(document).ready(function () {","            $(\".grafico\").hide();","","$(\"input,textarea,.fechas\").keypress(function(){","    var id=$(this).attr(\"name\");","    var idError=id+\"-error\";","$(this).removeClass(\"error\");","$(\"#\"+idError).remove();","//$(this).css(\"background\",\"white\");","","});","","$(\"select,.fechas\").change(function(){","    if($(this).val()!==\"\"){","    var id=$(this).attr(\"name\");","    var idError=id+\"-error\";","    $(this).removeClass(\"error\");","$(\"#\"+idError).remove();","","}","//$(this).css(\"background\",\"white\");","","});"," $(\"#generar\").click(function(){","                var fechaIni=$(\"#start\").val();","                var fechaFin=$(\"#end\").val();","            ","                if($(\"#form1\").valid() && validar_fechas(fechaIni,fechaFin)){","                   ","                   id_ciudad=$(\"#ciudad\").val();","                   id_categoria=$(\"#categoria\").val();","                   id_tipo_servicio=$(\"#tipo\").val();","                   fecha_inicio=$(\"#start\").val();","                   fecha_fin=$(\"#end\").val();","                    $.ajax({","\t       url:'/buscar_solicitudes_servicio',","\t   ","\t       data:{","\t            id_ciudad: id_ciudad,","\t            id_categoria: id_categoria,","\t            id_tipo_servicio:id_tipo_servicio,","\t            fecha_inicio: fecha_inicio,","                fecha_fin: fecha_fin","\t       },","\t       success:function(data){","\t           alert(\"todo bien\");","\t           ","\t           ","if(data.nuevo.length != 0 ){\t           ","\t           var array = [];","\t            ","\t           var total=0;","\t           var acum_ap=0;","\t           var acum_re=0;","\t           var total_total=0;","\t           for (var i=0;i<data.nuevo.length;i++) {","\t               total=data.nuevo[i].aprobadas+data.nuevo[i].rehazadas;","\t               total_total+=total;","\t               ","\t               acum_ap+=data.nuevo[i].aprobadas;","\t               acum_re+=data.nuevo[i].rehazadas;","\t               ","\t              var object = {y:data.nuevo[i].descripcion , a:data.nuevo[i].aprobadas , b:data.nuevo[i].rehazadas,c:total};","\t                 array.push(object);","\t               ","\t               ","\t               var tr=\"<tr><td>\"+data.nuevo[i].id+\"</td><td>\"+data.nuevo[i].descripcion+\"</td><td>\"+data.nuevo[i].aprobadas+\"</td><td>\"+data.nuevo[i].rehazadas+\"</td><td>\"+total+\"</td></tr>\";","\t               $(\"#tabla-resultados tbody\").append(tr);","\t               ","\t               ","\t           }","\t           $(\"#tabla-resultados tbody\").append(\"<tr><td colspan='2'>Total</td><td>\"+acum_ap+\"</td><td>\"+acum_re+\"</td><td>\"+total_total+\"</td></tr>\");","\t           ","\t           ","\t           ","\t           ","\t           ","\t           Morris.Bar({","        element: 'morris-bar-chart',","        data: array/*[{ y: 'Plomeria', a:  100, b: 10, c:60},","            { y: 'Jardineria', a: 100, b: 10, c:75 },","            { y: 'Albaliñeria', a: 40, b: 10, c:50 },","            { y: 'Electricidad', a: 65, b: 10, c:70 } ]*/,","        xkey: 'y',","        ykeys: ['a', 'b', 'c'],","        labels: ['Series A', 'Series B', 'Series C'],","        hideHover: 'auto',","        resize: true,","        barColors: ['#1ab394', '#cacaca', '#ff5b00'],","    });","","\t       \t    $(\".grafico\").show();","    ","}else{   ","    ","    toastr.error(\"No existen datos para esta consulta\");","    ","}","\t           ","\t       }/*fin del success*/,","\t       error:function(data){","\t           alert(\"todo mal\");","\t           toastr.error(data.message, \"Oops!\");","\t       }","\t   });","                   ","                }","            });","","","","$('#form1').validate({","","   onclick: false,","","   onkeyup: false,","","   onblur:false,","","   onfocusout:false,","","   rules: {","","       categoria: \"required\",","","       tipo:\"required\",","","        estado:\"required\",","","        ciudad:\"required\",","","       start:\"required\",","       ","       end:\"required\"","","   },","","   messages: {","","             categoria: {","","           required: \"EL campo nombre es requerido!\"","","       },","","       tipo: {","","           required: \"El tipo de promocion es obligatorio\"","","       },","","       estado:{","","           required:\"El titulo es obligatorio\"","","       },","","       ciudad:{","","           required:\"Ladescripcion es obligatoria\"","","       },","","       start:{","","           required:\"Indique fecha de creacion\"","","       },","","       municipio:{","","           required:\"Indique fecha caducidad\"","","       },","         end:{","           required:\"Indique un descuento\"","       }","","   },","","   errorPlacement: function (error, element) {","","       toastr.error(\"Dato invalido\");","","        element.before(error);","","       //$(element).css(\"background\",\"pink\");","","       $(element).focus();","","       ","","     ","","   }","","});","","});","","    </script>","","","<% end %>","<!-- Fin Reporte -->","",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":791,"column":0},"action":"insert","lines":["<% content_for :title, 'Comparativo de solicitudes aprobadas y rechazadas' %>","<%= render partial: 'partial/cabecera', ","        locals: {cabecera: {","            titulo: 'Comparación de solicitudes aprobadas y rechazadas',","            navegacion: [","                {titulo: 'Inicio', ruta: root_path},","                {titulo: 'Comparativo de solicitudes aprobadas y rechazadas', ruta: root_path}]","             }} %>","","<div class=\"wrapper wrapper-content\">","    <div class=\"row\">","        <div class=\"col-lg-12\">","            <div class=\"ibox float-e-margins\">","                <div class=\"ibox-content text-center p-md\">","            ","                    <!--<%=render partial: 'partial/boton_right', ","                    locals: {botones: [","                         {elemento: 'a_blank', titulo: '<i class=\"fa fa-print\"></i> Exportar', ruta: estadistico_solicitudes_exportar_path, clase: 'btn btn-info'}]","                    } %> -->","                    ","                    <div class=\"row\">","                         <a class=\"navbar-minimalize minimalize-styl-2\" style=\"margin: auto;\">","                               <%= image_tag ( \"ocelot/ocelot-imagotipo.png\"), :style =>'width: 150px;' %> ","                             <address>","                                  <!--<strong>OCELOT, C.A.</strong><br>-->","                                     Avenida Lara, Barquisimeto<br>","                                     Estado Lara, 3001<br>","                                     <abbr title=\"Teléfono\">Tlf:</abbr> 02515555555","                              </address>","                          </a><br>","                          ","                                            <div class=\"col-sm-9 text-right\">","","                                                <p>","                                                    <span><strong>Fecha Emisión: </strong>","                                                          <script>","                                                            var meses = new Array (\"Enero\",\"Febrero\",\"Marzo\",\"Abril\",\"Mayo\",\"Junio\",\"Julio\",\"Agosto\",\"Septiembre\",\"Octubre\",\"Noviembre\",\"Diciembre\");","                                                            var f=new Date();","                                                            document.write(f.getDate() + \" de \" + meses[f.getMonth()] + \" de \" + f.getFullYear());","                                                          </script>","                                                    </span><br/>","","                                                </p>","                                            </div>","                                        </div>","                                        ","                    <!-- Fin del encabezado del reporte-->                   ","                    <!-- inicio contenido reporte -->","            ","            ","                    <form class=\"form-horizontal\" id=\"form1\">","                        <div class=\"form-group\">","                            <label class=\"col-sm-2 control-label\">Categoria del Servicio</label>","                            <div class=\"col-sm-4\">","                                    <select data-placeholder=\"Seleccione un Servicio...\" class=\"chosen-select\" tabindex=\"2\" name=\"categoria\" id=\"categoria\">","                                        <option value=\"\">Seleccione</option>","                                <% @categoria.try(:each) do |opt| %>","                                    <option value=\"<%= opt.id %>\"><%= opt.descripcion %></option>","                                <%  end %>","                                        ","                                    </select>","                            </div>","                            <label class=\"col-sm-2 control-label\"> Tipo de Servicio</label>","                            <div class=\"col-sm-4\">","                                <select data-placeholder=\"Seleccione el Tipo de Servicio...\" class=\"chosen-select\" tabindex=\"3\" name=\"tipo\" id=\"tipo\">","                                    <option value=\"\">Seleccione</option>","                                    ","                                    ","                                </select>","                            </div>","                        </div>","                        ","                        <div class=\"form-group\">","                         <label class=\"col-sm-2 control-label\">Estado</label>   ","                         <div class=\"col-sm-4\">","                                    <select data-placeholder=\"Seleccione un Servicio...\" class=\"chosen-select\" tabindex=\"4\" name=\"estado\" id=\"estado\">","                                        <option value=\"\">seleccione</option>","                                    <% @estado.try(:each) do |opt| %>","                                    <option value=\"<%= opt.id %>\"><%= opt.descripcion %></option>","                                <%  end %>","                                    ","                                    </select>","                         </div>","","                             <div class=\"form-group\">","                            <label class=\"col-sm-2 control-label\">Ciudad</label>","                             <div class=\"col-sm-4\">","                                    <select data-placeholder=\"Seleccione un Servicio...\" class=\"chosen-select\" tabindex=\"5\" name=\"ciudad\" id=\"ciudad\">","                                        <option value=\"\">seleccione</option>","                                        ","                                        ","                                    </select>","                            </div>","                            <label class=\"col-sm-2 control-label\"></label>","","                            </div>","                            </div>","","                            <div class=\"form-group\" id=\"data_5\">","                            <label class=\"col-sm-2 control-label\">Rango de Consulta</label>","                            <div class=\"col-sm-10\">","                                <div class=\"input-daterange input-group col-sm-12\" id=\"datepicker\">","                                    <span class=\"input-group-addon\">Desde</span>","                                    <input type=\"text\" class=\"input-sm form-control date\" name=\"start\" value=\"12/03/2017\" id=\"start\">","                                    <span class=\"input-group-addon\">Hasta</span>","                                    <input type=\"text\" class=\"input-sm form-control date\" name=\"end\" value=\"12/05/2017\" id=\"end\"/>","                                </div>","                            </div>","                            ","                                                    <div class=\"col-sm-12\">","                                <%=render partial: 'partial/boton_right', ","                                locals: {botones: [","                                 {elemento: 'button', id:'generar',titulo: '<i class=\"fa fa-bar-chart\"></i> Generar', clase: 'btn btn-success',contenido:'<i class=\"fa fa-bar-chart\"></i> Generar'}]","                                } %> ","                        </div>","                            ","                            ","                        </div>    ","","                        </div>","                        ","                        ","  ","","                    </form>","                    <br>","                    ","                    <div>","                        <div class=\"row\">","                          ","                            <div class=\"col-lg-12 grafico\">","                            <div class=\"ibox float-e-margins\">","                                <div class=\"ibox-title\">","                                    <h5>Comparativo de Solicitudes por Servicio</h5>","                             <div class=\"ibox-tools\">","                            <a class=\"collapse-link\">","                                <i class=\"fa fa-chevron-up\"></i>","                            </a>","                        </div>","                                </div> ","                                <div class=\"ibox-content\">","","                                       <div id=\"morris-bar-chart\"></div>  ","                                       ","                                <div>","                                    Solicitudes Aprobadas<span style=\"background:#1ab394;\">&nbsp;&nbsp;</span>","                                    Solicitudes Rechazadas<span style=\"background:#cacaca;\">&nbsp;&nbsp;</span>","                                    Total de Solicitudes<span style=\"background:#ff5b00;\">&nbsp;&nbsp;</span>","                                </div>","","                                </div>","","","                                ","                                ","                                <!--Inicio de la Tabla-->","                                "," <div class=\"wrapper wrapper-content animated fadeInRight\">","            <div class=\"row\">","                <div class=\"col-lg-13\">","                <div class=\"ibox float-e-margins\">","                    <div class=\"ibox-title\">","                        <h5>Datos</h5>","                        <div class=\"ibox-tools\">","                            <a class=\"collapse-link\">","                                <i class=\"fa fa-chevron-up\"></i>","                            </a>","","                        </div>","                    </div>","                    <div class=\"ibox-content\">","","                        <table class=\"table\" id=\"tabla-resultados\">","                            <thead>","                            <tr>","                                <th>Codigo de Servicio</th>","                                <th>Servicio</th>","                                <th>Solicitudes Aprobadas</th>","                                <th>Solicitudes Rechazadas</th>","                                <th>Total de Solicitudes por Servicio</th>","                            </tr>","                            </thead>","                            <tbody>","                            ","                            ","                            </tbody>","                        </table>","","                    </div>","                </div>","            </div>","                                ","                                ","                                ","                                ","                                ","                                ","                                <!-- fin de la tabla-->","                                ","                                ","                                ","                                  ","                                    <%=render partial: 'partial/boton_right', ","                    locals: {botones: [","                         {elemento: 'a_blank', titulo: '<i class=\"fa fa-print\"></i> Exportar', ruta: estadistico_solicitudes_exportar_path, clase: 'btn btn-info'}]","                    } %>  ","                            </div>","                        </div>","                        ","                    </div>","                        ","            ","                    </div>","                    ","                    </div>","                    ","                </div>","            </div>        ","        </div>"," ","","","  ","<% content_for :javascript do %>","<script type=\"text/javascript\">","","    $(function() {","        datePickerMultiple();","        chosen();","        cambiarChosenCategoria();","        cambiarChosenEstado();","        $( \".date\" ).datepicker( \"option\", \"dateFormat\", 'yy-mm-dd' );","","    });","    var cambiarChosenCategoria = function(){","   $('#categoria').on('change', function(e) {","        $.ajax({","             url:\"/buscarTipoInmueblePorCategoria\",","                data:{","                    url: \"tipoServicio/categoria/\" + $(this).val() +\"/buscarPorCategoria\"","                },","            success:function(data){","                 console.log(data.tipoInmueble);","                    /*toastr.success(data.tipoInmueble[0].id);*/","                    $(\"#tipo\").empty().trigger(\"chosen:updated\");","                    $(\"#tipo\").append(\"<option value>Selecccione</option>\");","                     $.each(data.tipoInmueble, function(key,val) {  ","                        console.log(val.descripcion);","                        $(\"#tipo\").append(\"<option value=\\\"\"+val.id+\"\\\">\"+val.descripcion+\"</option>\");","                    }); ","                    $(\"#tipo\").trigger(\"chosen:updated\"); // para mandar a ejecutar la carga","            },","              error:function(data){","                    toastr.error(data.message, \"Oops!\");","                }","        });//fin ajax","    ","    }); //fin funcion ","","    ","}  // fin chosen categoria ","","var cambiarChosenEstado = function() {","    $('#estado').on('change', function(e) {","        $.ajax({","        url:\"/buscarCiudadPorEstado\",","                data:{","                    url: \"ciudad/estado/\" + $(this).val() +\"/buscarPorEstado\"","                },","                success:function(data){","                    console.log(data.ciudad);","                    //toastr.success(data.ciudad[0].id);","                    $(\"#ciudad\").empty().trigger(\"chosen:updated\");","                    $(\"#ciudad\").append(\"<option value>Selecccione</option>\");","                    $.each(data.ciudad, function(key,val) {  ","                        console.log(val.descripcion);","                       // $(\"#ciudad\").append(\"<option></option>\");","                ","                        $(\"#ciudad\").append(\"<option value=\\\"\"+val.id+\"\\\">\"+val.descripcion+\"</option>\");","                    }); ","                    $(\"#ciudad\").trigger(\"chosen:updated\");","                    ","                },             ","                error:function(data){","                    toastr.error(data.message, \"Oops!\");","                }","            });","        });    ","  "," }//fin","  cambiarChosenCiudad = function(){","    console.log(\"ayyyyy\");","    $('#ciudad').on('change',function(e){","//    alert(\"Cambio\");","       $.ajax({","           ","           url:\"/buscarMunicipioPorCiudad\",","          data:{","                    url: \"municipio/ciudad/\" + $(this).val() +\"/buscarPorCiudad\"","                },","            success:function(data){","                console.log(data.municipio);","                toastr.success(data.municipio[0].id);","                 $(\"#municipio\").empty().trigger(\"chosen:updated\");","                 $(\"#municipio\").append(\"<option value>Selecccione</option>\");","                   $.each(data.municipio, function(key,val) {","                       console.log(val.descripcion);","                       ","                       $(\"#municipio\").append(\"<option value=\\\"\"+val.id+\"\\\">\"+val.descripcion+\"</option>\");","                       ","                   });","                   ","                   $(\"#municipio\").trigger(\"chosen:updated\");","                 ","            },    ","            ","            error:function(data){","                    toastr.error(data.message, \"Oops!\");","                ","            }","            ","                ","       });","        ","    });","    ","    ","} //Fin function ","","","","","    var datePickerMultiple = function() {","        $('.date').datepicker({","            language: 'es',","            startView: 2,","            todayBtn: \"linked\",","            keyboardNavigation: false,","            forceParse: false,","            dateFormat: 'yy-mm-dd', ","            autoclose: true","        });","    }","    ","    var chosen = function() {","        $(\".chosen-select\").chosen(chosen_language);","    }","        $('#data_5 .input-daterange').datepicker({","                keyboardNavigation: false,","                forceParse: false,","                autoclose: true","            });","            ","            ","            ","            ","            ","            ","            $(function () {","                ","                ","    var lineData = {","        labels: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\"],","        datasets: [","            {","                label: \"Example dataset\",","                fillColor: \"rgba(220,220,220,0.5)\",","                strokeColor: \"rgba(220,220,220,1)\",","                pointColor: \"rgba(220,220,220,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(220,220,220,1)\",","                data: [65, 59, 80, 81, 56, 55, 40]","            },","            {","                label: \"Example dataset\",","                fillColor: \"rgba(26,179,148,0.5)\",","                strokeColor: \"rgba(26,179,148,0.7)\",","                pointColor: \"rgba(26,179,148,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(26,179,148,1)\",","                data: [28, 48, 40, 19, 86, 27, 90]","            }","        ]","    };","","    var lineOptions = {","        scaleShowGridLines: true,","        scaleGridLineColor: \"rgba(0,0,0,.05)\",","        scaleGridLineWidth: 1,","        bezierCurve: true,","        bezierCurveTension: 0.4,","        pointDot: true,","        pointDotRadius: 4,","        pointDotStrokeWidth: 1,","        pointHitDetectionRadius: 20,","        datasetStroke: true,","        datasetStrokeWidth: 2,","        datasetFill: true,","        responsive: true,","    };","","","    var ctx = document.getElementById(\"lineChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Line(lineData, lineOptions);","","    var barData = {","        labels: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\"],","        datasets: [","            {","                label: \"My First dataset\",","                fillColor: \"rgba(220,220,220,0.5)\",","                strokeColor: \"rgba(220,220,220,0.8)\",","                highlightFill: \"rgba(220,220,220,0.75)\",","                highlightStroke: \"rgba(220,220,220,1)\",","                data: [65, 59, 80, 81, 56, 55, 40]","            },","            {","                label: \"My Second dataset\",","                fillColor: \"rgba(26,179,148,0.5)\",","                strokeColor: \"rgba(26,179,148,0.8)\",","                highlightFill: \"rgba(26,179,148,0.75)\",","                highlightStroke: \"rgba(26,179,148,1)\",","                data: [28, 48, 40, 19, 86, 27, 90]","            }","        ]","    };","","    var barOptions = {","        scaleBeginAtZero: true,","        scaleShowGridLines: true,","        scaleGridLineColor: \"rgba(0,0,0,.05)\",","        scaleGridLineWidth: 1,","        barShowStroke: true,","        barStrokeWidth: 2,","        barValueSpacing: 5,","        barDatasetSpacing: 1,","        responsive: true,","    }","","","    var ctx = document.getElementById(\"barChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Bar(barData, barOptions);","","    var polarData = [","        {","            value: 300,","            color: \"#a3e1d4\",","            highlight: \"#1ab394\",","            label: \"App\"","        },","        {","            value: 140,","            color: \"#dedede\",","            highlight: \"#1ab394\",","            label: \"Software\"","        },","        {","            value: 200,","            color: \"#b5b8cf\",","            highlight: \"#1ab394\",","            label: \"Laptop\"","        }","    ];","","    var polarOptions = {","        scaleShowLabelBackdrop: true,","        scaleBackdropColor: \"rgba(255,255,255,0.75)\",","        scaleBeginAtZero: true,","        scaleBackdropPaddingY: 1,","        scaleBackdropPaddingX: 1,","        scaleShowLine: true,","        segmentShowStroke: true,","        segmentStrokeColor: \"#fff\",","        segmentStrokeWidth: 2,","        animationSteps: 100,","        animationEasing: \"easeOutBounce\",","        animateRotate: true,","        animateScale: false,","        responsive: true,","","    };","","    var ctx = document.getElementById(\"polarChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).PolarArea(polarData, polarOptions);","","    var doughnutData = [","        {","            value: 300,","            color: \"#a3e1d4\",","            highlight: \"#1ab394\",","            label: \"App\"","        },","        {","            value: 50,","            color: \"#dedede\",","            highlight: \"#1ab394\",","            label: \"Software\"","        },","        {","            value: 100,","            color: \"#b5b8cf\",","            highlight: \"#1ab394\",","            label: \"Laptop\"","        }","    ];","","    var doughnutOptions = {","        segmentShowStroke: true,","        segmentStrokeColor: \"#fff\",","        segmentStrokeWidth: 2,","        percentageInnerCutout: 45, // This is 0 for Pie charts","        animationSteps: 100,","        animationEasing: \"easeOutBounce\",","        animateRotate: true,","        animateScale: false,","        responsive: true,","    };","","","    var ctx = document.getElementById(\"doughnutChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Doughnut(doughnutData, doughnutOptions);","","","    var radarData = {","        labels: [\"Eating\", \"Drinking\", \"Sleeping\", \"Designing\", \"Coding\", \"Cycling\", \"Running\"],","        datasets: [","            {","                label: \"My First dataset\",","                fillColor: \"rgba(220,220,220,0.2)\",","                strokeColor: \"rgba(220,220,220,1)\",","                pointColor: \"rgba(220,220,220,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(220,220,220,1)\",","                data: [65, 59, 90, 81, 56, 55, 40]","            },","            {","                label: \"My Second dataset\",","                fillColor: \"rgba(26,179,148,0.2)\",","                strokeColor: \"rgba(26,179,148,1)\",","                pointColor: \"rgba(26,179,148,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(151,187,205,1)\",","                data: [28, 48, 40, 19, 96, 27, 100]","            }","        ]","    };","","    var radarOptions = {","        scaleShowLine: true,","        angleShowLineOut: true,","        scaleShowLabels: false,","        scaleBeginAtZero: true,","        angleLineColor: \"rgba(0,0,0,.1)\",","        angleLineWidth: 1,","        pointLabelFontFamily: \"'Arial'\",","        pointLabelFontStyle: \"normal\",","        pointLabelFontSize: 10,","        pointLabelFontColor: \"#666\",","        pointDot: true,","        pointDotRadius: 3,","        pointDotStrokeWidth: 1,","        pointHitDetectionRadius: 20,","        datasetStroke: true,","        datasetStrokeWidth: 2,","        datasetFill: true,","        responsive: true,","    }","","    var ctx = document.getElementById(\"radarChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Radar(radarData, radarOptions);","","});","            ","            ","            ","            ","    </script>","    <script>","","        $(document).ready(function () {","            $(\".grafico\").hide();","","$(\"input,textarea,.fechas\").keypress(function(){","    var id=$(this).attr(\"name\");","    var idError=id+\"-error\";","$(this).removeClass(\"error\");","$(\"#\"+idError).remove();","//$(this).css(\"background\",\"white\");","","});","","$(\"select,.fechas\").change(function(){","    if($(this).val()!==\"\"){","    var id=$(this).attr(\"name\");","    var idError=id+\"-error\";","    $(this).removeClass(\"error\");","$(\"#\"+idError).remove();","","}","//$(this).css(\"background\",\"white\");","","});"," $(\"#generar\").click(function(){","                var fechaIni=$(\"#start\").val();","                var fechaFin=$(\"#end\").val();","            ","                if($(\"#form1\").valid() && validar_fechas(fechaIni,fechaFin)){","                   ","                   id_ciudad=$(\"#ciudad\").val();","                   id_categoria=$(\"#categoria\").val();","                   id_tipo_servicio=$(\"#tipo\").val();","                   fecha_inicio=$(\"#start\").val();","                   fecha_fin=$(\"#end\").val();","                    $.ajax({","\t       url:'/buscar_solicitudes_servicio',","\t   ","\t       data:{","\t            id_ciudad: id_ciudad,","\t            id_categoria: id_categoria,","\t            id_tipo_servicio:id_tipo_servicio,","\t            fecha_inicio: fecha_inicio,","                fecha_fin: fecha_fin","\t       },","\t       success:function(data){","//\t           alert(\"bien\");","\t           ","\t           ","            if(data.nuevo.length != 0 ){\t           ","\t           var array = [];","\t            ","\t           var total=0;","\t           var acum_ap=0;","\t           var acum_re=0;","\t           var total_total=0;","\t           for (var i=0;i<data.nuevo.length;i++) {","\t               total=data.nuevo[i].aprobadas+data.nuevo[i].rehazadas;","\t               total_total+=total;","\t               ","\t               acum_ap+=data.nuevo[i].aprobadas;","\t               acum_re+=data.nuevo[i].rehazadas;","\t               ","\t              var object = {y:data.nuevo[i].descripcion , a:data.nuevo[i].aprobadas , b:data.nuevo[i].rehazadas,c:total};","\t                 array.push(object);","\t               ","\t               ","\t               var tr=\"<tr><td>\"+data.nuevo[i].id+\"</td><td>\"+data.nuevo[i].descripcion+\"</td><td>\"+data.nuevo[i].aprobadas+\"</td><td>\"+data.nuevo[i].rehazadas+\"</td><td>\"+total+\"</td></tr>\";","\t               $(\"#tabla-resultados tbody\").append(tr);","\t               ","\t               ","\t           }","\t           $(\"#tabla-resultados tbody\").append(\"<tr><td colspan='2'>Total</td><td>\"+acum_ap+\"</td><td>\"+acum_re+\"</td><td>\"+total_total+\"</td></tr>\");","\t           ","\t           ","\t           ","\t           ","\t           ","\t           Morris.Bar({","        element: 'morris-bar-chart',","        data: array,","        xkey: 'y',","        ykeys: ['a', 'b', 'c'],","        labels: ['Aprobados', 'Rechazadas', 'Totales'],","        hideHover: 'auto',","        resize: true,","        barColors: ['#1ab394', '#cacaca', '#ff5b00'],","        ","    });","","\t       \t    $(\".grafico\").show();","\t       \t    toastr.success(\"Reporte generado\");","    ","}else{   ","    ","    toastr.error(\"No existen datos para esta consulta\");","    ","}","\t           ","\t       }/*fin del success*/,","\t       error:function(data){","//\t           alert(\" mal\");","\t           toastr.error(data.message, \"Oops!\");","\t       }","\t   });","                   ","                }","                 //ESTO ES UNA PRUEBA DE SACAR EL VALOR PARA EL AJAX BORRAR DESPUES DE PROBAR","     ","            });","            ","            ","","","$('#form1').validate({","","   onclick: false,","","   onkeyup: false,","","   onblur:false,","","   onfocusout:false,","","   rules: {","","       categoria: \"required\",","","       tipo:\"required\",","","        estado:\"required\",","","        ciudad:\"required\",","","       start:\"required\",","       ","       end:\"required\"","","   },","","   messages: {","","             categoria: {","","           required: \"EL campo nombre es requerido!\"","","       },","","       tipo: {","","           required: \"El tipo de promocion es obligatorio\"","","       },","","       estado:{","","           required:\"El titulo es obligatorio\"","","       },","","       ciudad:{","","           required:\"Ladescripcion es obligatoria\"","","       },","","       start:{","","           required:\"Indique fecha de creacion\"","","       },","","       municipio:{","","           required:\"Indique fecha caducidad\"","","       },","         end:{","           required:\"Indique un descuento\"","       }","","   },","","   errorPlacement: function (error, element) {","","       toastr.error(\"Dato invalido\");","","        element.before(error);","","       //$(element).css(\"background\",\"pink\");","","       $(element).focus();","","       ","","     ","","   }","","});","","});","","","    </script>","","","<% end %>","<!-- Fin Reporte -->",""]}]]},"ace":{"folds":[],"scrolltop":13127,"scrollleft":0,"selection":{"start":{"row":791,"column":0},"end":{"row":791,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":771,"state":"js-start","mode":"ace/mode/html_ruby"}},"timestamp":1512560340531,"hash":"1c53f2e457456711eabc98eb4a9ca88b9b0e3dd9"}