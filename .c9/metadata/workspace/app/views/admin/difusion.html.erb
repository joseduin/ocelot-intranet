{"filter":false,"title":"difusion.html.erb","tooltip":"/app/views/admin/difusion.html.erb","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":642,"column":0},"action":"insert","lines":["<% content_for :title, 'Difusion' %>","<%= render partial: 'partial/cabecera', ","        locals: {cabecera: {","            titulo: 'Difusión',","            navegacion: [","                {titulo: 'Inicio', ruta: root_path},","                {titulo: 'Difusion', ruta: root_path}]","             }} %>","","<div class=\"wrapper wrapper-content\">","    <div class=\"row\">","        <div class=\"col-lg-12\">","            <div class=\"ibox float-e-margins\">","                <div class=\"ibox-content text-center p-md\">","            ","                    <!--<%=render partial: 'partial/boton_right', ","                    locals: {botones: [","                         {elemento: 'a_blank', titulo: '<i class=\"fa fa-print\"></i> Exportar', ruta: estadistico_solicitudes_exportar_path, clase: 'btn btn-info'}]","                    } %> -->","                    ","                    <div class=\"row\">","                         <a class=\"navbar-minimalize minimalize-styl-2\" style=\"margin: auto;\">","                               <%= image_tag ( \"ocelot/ocelot-imagotipo.png\"), :style =>'width: 150px;' %> ","                             <address>","                                  <!--<strong>OCELOT, C.A.</strong><br>-->","                                     Avenida Lara, Barquisimeto<br>","                                     Estado Lara, 3001<br>","                                     <abbr title=\"Teléfono\">Tlf:</abbr> 02515555555","                              </address>","                         ","                         ","                          </a><br>","                            ","                                        ","                                            ","                    <!-- iniciocontenido reporte -->","            ","            ","                    <form class=\"form-horizontal\" id=\"form1\">","                        <div class=\"form-group\">","                            ","                            ","                        </div>","                        ","                        <div class=\"form-group\">","                            <label class=\"col-sm-2 control-label\">Promociones</label>","                            <div class=\"col-sm-4\">","                                    <select data-placeholder=\"Seleccione un Servicio...\" class=\"chosen-select\" tabindex=\"2\" name=\"categoria\" id=\"categoria\">","                                        <option value=\"\">Seleccione</option>","                                        <% @promociones.try(:each) do |opt| %>","                                            <option value=\"<%= opt.id %>\"><%= opt.descripcion %></option>","                                        <% end %>","                                        ","                                    </select>","                            </div>","                            <div class=\"form-group\">","                            <label class=\"col-sm-2 control-label\">Tipo de Inmueble</label>","                             <div class=\"col-sm-4\">","                                    <select data-placeholder=\"Seleccione un tipo de inmueble ...\" class=\"chosen-select\" tabindex=\"2\" name=\"ciudad\" id=\"tipo_inmueble\">","                                        <option value=\"\">seleccione</option>","                                        <% @tipo_inmueble.try(:each) do |opt| %>","                                        <option value=\"<%= opt.id %>\"><%= opt.descripcion %></option>","                                        <% end %> ","                                        ","                                    </select>","                            </div>","                        </div>","                    </div>","                            ","                                                    <div class=\"col-sm-12\">","                                <%=render partial: 'partial/boton_right', ","                                locals: {botones: [","                                 {elemento: 'button', id:'generar',titulo: '<i class=\"fa fa-bar-chart\"></i> Generar', clase: 'btn btn-success',contenido:'<i class=\"fa fa-bar-chart\"></i> Difundir'}]","                                } %> ","                        </div>","                        </div>    ","","                        </div>","                 </form>","                    <br>","                    ","                    <div>","                        <div class=\"row\">","                          ","                            <div class=\"col-lg-12 grafico\">","                            <div class=\"ibox float-e-margins\">","                                ","                                ","                                ","                                ","                                <!--Inicio de la Tabla-->","                                ","    <div class=\"wrapper wrapper-content animated fadeInRight\">","            <div class=\"row\">","                <div class=\"col-lg-13\">","                <div class=\"ibox float-e-margins\">","                    <div class=\"ibox-title\">","                        <h5>Datos</h5>","                    </div>","                    <div class=\"ibox-content\">","","                        <table class=\"table\">","                            <thead>","                            <tr>","                                <th>Nombre Cliente</th>","                                <th>Telefono</th>","                                <th>Correo</th>","                                <th>Direccion</th>","                            </tr>","                            </thead>","                            <tbody>","                            <tr>","                                <% @cliente.try(:each) do |opt| %>","                                <td>","                                    <%= opt.nombre %>","                                </td>","                                <td>","                                    <%= opt.telefono %>","                                </td>","                                 <td>","                                    <%= opt.email %>","                                </td>","                                 <td>","                                    <%= opt.direccion %>","                                </td>","                                ","                            </tr>","                            <%  end %>","                            </tbody>","                        </table>","","                    </div>","                </div>","            </div>","                                <!-- fin de la tabla-->","   ","                            </div>","                        </div>","                        ","                    </div>","                        ","            ","                    </div>","                    ","                    </div>","                    ","                </div>","            </div>        ","        </div>"," ","","  ","<% content_for :javascript do %>","<script type=\"text/javascript\">","","    $(function() {","        datePickerMultiple();","        chosen();","        cambiarChosenCategoria();","        cambiarChosenEstado();","        ","        /*$(\".grafico\").hide();","        $(\".btn-success\").click(function(){","            $(\".grafico\").show();","        });*/","        ","    });","    var cambiarChosenCategoria = function(){","   $('#categoria').on('change', function(e) {","        $.ajax({","             url:\"/buscarTipoInmueblePorCategoria\",","                data:{","                    url: \"tipoServicio/categoria/\" + $(this).val() +\"/buscarPorCategoria\"","                },","            success:function(data){","                 console.log(data.tipoInmueble);","                    /*toastr.success(data.tipoInmueble[0].id);*/","                    $(\"#tipo\").empty().trigger(\"chosen:updated\");","                    $(\"#tipo\").append(\"<option value>Selecccione</option>\");","                     $.each(data.tipoInmueble, function(key,val) {  ","                        console.log(val.descripcion);","                        $(\"#tipo\").append(\"<option value=\\\"\"+val.id+\"\\\">\"+val.descripcion+\"</option>\");","                    }); ","                    $(\"#tipo\").trigger(\"chosen:updated\"); // para mandar a ejecutar la carga","            },","              error:function(data){","                    toastr.error(data.message, \"Oops!\");","                }","        });//fin ajax","    ","    }); //fin funcion ","","    ","}  // fin chosen categoria ","var cambiarChosenEstado = function() {","    $('#estado').on('change', function(e) {","        $.ajax({","        url:\"/buscarCiudadPorEstado\",","                data:{","                    url: \"ciudad/estado/\" + $(this).val() +\"/buscarPorEstado\"","                },","                success:function(data){","                    console.log(data.ciudad);","                    //toastr.success(data.ciudad[0].id);","                    $(\"#ciudad\").empty().trigger(\"chosen:updated\");","                    $(\"#ciudad\").append(\"<option value>Selecccione</option>\");","                    $.each(data.ciudad, function(key,val) {  ","                        console.log(val.descripcion);","                       // $(\"#ciudad\").append(\"<option></option>\");","                ","                        $(\"#ciudad\").append(\"<option value=\\\"\"+val.id+\"\\\">\"+val.descripcion+\"</option>\");","                    }); ","                    $(\"#ciudad\").trigger(\"chosen:updated\");","                    ","                },             ","                error:function(data){","                    toastr.error(data.message, \"Oops!\");","                }","            });","        });    ","  "," }//fin","  cambiarChosenCiudad = function(){","    console.log(\"ayyyyy\");","    $('#ciudad').on('change',function(e){","        alert(\"Cambioo\");","       $.ajax({","           ","           url:\"/buscarMunicipioPorCiudad\",","          data:{","                    url: \"municipio/ciudad/\" + $(this).val() +\"/buscarPorCiudad\"","                },","            success:function(data){","                console.log(data.municipio);","                toastr.success(data.municipio[0].id);","                 $(\"#municipio\").empty().trigger(\"chosen:updated\");","                 $(\"#municipio\").append(\"<option value>Selecccione</option>\");","                   $.each(data.municipio, function(key,val) {","                       console.log(val.descripcion);","                       ","                       $(\"#municipio\").append(\"<option value=\\\"\"+val.id+\"\\\">\"+val.descripcion+\"</option>\");","                       ","                   });","                   ","                   $(\"#municipio\").trigger(\"chosen:updated\");","                 ","            },    ","            ","            error:function(data){","                    toastr.error(data.message, \"Oops!\");","                ","            }","            ","                ","       });","        ","    });","    ","    ","} //Fin function ","","","    var datePickerMultiple = function() {","        $('.date').datepicker({","            language: 'es',","            startView: 2,","            todayBtn: \"linked\",","            keyboardNavigation: false,","            forceParse: false,","            autoclose: true","        });","    }","    var chosen = function() {","        $(\".chosen-select\").chosen(chosen_language);","    }","        $('#data_5 .input-daterange').datepicker({","                keyboardNavigation: false,","                forceParse: false,","                autoclose: true","            });","            ","            ","            ","            ","            ","            ","            $(function () {","","    var lineData = {","        labels: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\"],","        datasets: [","            {","                label: \"Example dataset\",","                fillColor: \"rgba(220,220,220,0.5)\",","                strokeColor: \"rgba(220,220,220,1)\",","                pointColor: \"rgba(220,220,220,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(220,220,220,1)\",","                data: [65, 59, 80, 81, 56, 55, 40]","            },","            {","                label: \"Example dataset\",","                fillColor: \"rgba(26,179,148,0.5)\",","                strokeColor: \"rgba(26,179,148,0.7)\",","                pointColor: \"rgba(26,179,148,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(26,179,148,1)\",","                data: [28, 48, 40, 19, 86, 27, 90]","            }","        ]","    };","","    var lineOptions = {","        scaleShowGridLines: true,","        scaleGridLineColor: \"rgba(0,0,0,.05)\",","        scaleGridLineWidth: 1,","        bezierCurve: true,","        bezierCurveTension: 0.4,","        pointDot: true,","        pointDotRadius: 4,","        pointDotStrokeWidth: 1,","        pointHitDetectionRadius: 20,","        datasetStroke: true,","        datasetStrokeWidth: 2,","        datasetFill: true,","        responsive: true,","    };","","","    var ctx = document.getElementById(\"lineChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Line(lineData, lineOptions);","","    var barData = {","        labels: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\"],","        datasets: [","            {","                label: \"My First dataset\",","                fillColor: \"rgba(220,220,220,0.5)\",","                strokeColor: \"rgba(220,220,220,0.8)\",","                highlightFill: \"rgba(220,220,220,0.75)\",","                highlightStroke: \"rgba(220,220,220,1)\",","                data: [65, 59, 80, 81, 56, 55, 40]","            },","            {","                label: \"My Second dataset\",","                fillColor: \"rgba(26,179,148,0.5)\",","                strokeColor: \"rgba(26,179,148,0.8)\",","                highlightFill: \"rgba(26,179,148,0.75)\",","                highlightStroke: \"rgba(26,179,148,1)\",","                data: [28, 48, 40, 19, 86, 27, 90]","            }","        ]","    };","","    var barOptions = {","        scaleBeginAtZero: true,","        scaleShowGridLines: true,","        scaleGridLineColor: \"rgba(0,0,0,.05)\",","        scaleGridLineWidth: 1,","        barShowStroke: true,","        barStrokeWidth: 2,","        barValueSpacing: 5,","        barDatasetSpacing: 1,","        responsive: true,","    }","","","    var ctx = document.getElementById(\"barChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Bar(barData, barOptions);","","    var polarData = [","        {","            value: 300,","            color: \"#a3e1d4\",","            highlight: \"#1ab394\",","            label: \"App\"","        },","        {","            value: 140,","            color: \"#dedede\",","            highlight: \"#1ab394\",","            label: \"Software\"","        },","        {","            value: 200,","            color: \"#b5b8cf\",","            highlight: \"#1ab394\",","            label: \"Laptop\"","        }","    ];","","    var polarOptions = {","        scaleShowLabelBackdrop: true,","        scaleBackdropColor: \"rgba(255,255,255,0.75)\",","        scaleBeginAtZero: true,","        scaleBackdropPaddingY: 1,","        scaleBackdropPaddingX: 1,","        scaleShowLine: true,","        segmentShowStroke: true,","        segmentStrokeColor: \"#fff\",","        segmentStrokeWidth: 2,","        animationSteps: 100,","        animationEasing: \"easeOutBounce\",","        animateRotate: true,","        animateScale: false,","        responsive: true,","","    };","","    var ctx = document.getElementById(\"polarChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).PolarArea(polarData, polarOptions);","","    var doughnutData = [","        {","            value: 300,","            color: \"#a3e1d4\",","            highlight: \"#1ab394\",","            label: \"App\"","        },","        {","            value: 50,","            color: \"#dedede\",","            highlight: \"#1ab394\",","            label: \"Software\"","        },","        {","            value: 100,","            color: \"#b5b8cf\",","            highlight: \"#1ab394\",","            label: \"Laptop\"","        }","    ];","","    var doughnutOptions = {","        segmentShowStroke: true,","        segmentStrokeColor: \"#fff\",","        segmentStrokeWidth: 2,","        percentageInnerCutout: 45, // This is 0 for Pie charts","        animationSteps: 100,","        animationEasing: \"easeOutBounce\",","        animateRotate: true,","        animateScale: false,","        responsive: true,","    };","","","    var ctx = document.getElementById(\"doughnutChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Doughnut(doughnutData, doughnutOptions);","","","    var radarData = {","        labels: [\"Eating\", \"Drinking\", \"Sleeping\", \"Designing\", \"Coding\", \"Cycling\", \"Running\"],","        datasets: [","            {","                label: \"My First dataset\",","                fillColor: \"rgba(220,220,220,0.2)\",","                strokeColor: \"rgba(220,220,220,1)\",","                pointColor: \"rgba(220,220,220,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(220,220,220,1)\",","                data: [65, 59, 90, 81, 56, 55, 40]","            },","            {","                label: \"My Second dataset\",","                fillColor: \"rgba(26,179,148,0.2)\",","                strokeColor: \"rgba(26,179,148,1)\",","                pointColor: \"rgba(26,179,148,1)\",","                pointStrokeColor: \"#fff\",","                pointHighlightFill: \"#fff\",","                pointHighlightStroke: \"rgba(151,187,205,1)\",","                data: [28, 48, 40, 19, 96, 27, 100]","            }","        ]","    };","","    var radarOptions = {","        scaleShowLine: true,","        angleShowLineOut: true,","        scaleShowLabels: false,","        scaleBeginAtZero: true,","        angleLineColor: \"rgba(0,0,0,.1)\",","        angleLineWidth: 1,","        pointLabelFontFamily: \"'Arial'\",","        pointLabelFontStyle: \"normal\",","        pointLabelFontSize: 10,","        pointLabelFontColor: \"#666\",","        pointDot: true,","        pointDotRadius: 3,","        pointDotStrokeWidth: 1,","        pointHitDetectionRadius: 20,","        datasetStroke: true,","        datasetStrokeWidth: 2,","        datasetFill: true,","        responsive: true,","    }","","    var ctx = document.getElementById(\"radarChart\").getContext(\"2d\");","    var myNewChart = new Chart(ctx).Radar(radarData, radarOptions);","","});","            ","            ","            ","            ","    </script>","    <script>","","        $(document).ready(function () {","            $(\".grafico\").hide();","","$(\"input,textarea,.fechas\").keypress(function(){","    var id=$(this).attr(\"name\");","    var idError=id+\"-error\";","$(this).removeClass(\"error\");","$(\"#\"+idError).remove();","//$(this).css(\"background\",\"white\");","","});","","$(\"select,.fechas\").change(function(){","    if($(this).val()!==\"\"){","    var id=$(this).attr(\"name\");","    var idError=id+\"-error\";","    $(this).removeClass(\"error\");","$(\"#\"+idError).remove();","","}","//$(this).css(\"background\",\"white\");","","});"," $(\"#generar\").click(function(){","                var fechaIni=$(\"#start\").val();","                var fechaFin=$(\"#end\").val();","            ","                if($(\"#form1\").valid() && validar_fechas(fechaIni,fechaFin)){","                   $(\".grafico\").show();","                   //alert(\"por AQUI ANDO\");","                }","            });","","","","$('#form1').validate({","","   onclick: false,","","   onkeyup: false,","","   onblur:false,","","   onfocusout:false,","","   rules: {","","       categoria: \"required\",","","       tipo:\"required\",","","        estado:\"required\",","","        ciudad:\"required\",","","       municipio:\"required\",","","       start:\"required\",","       ","       end:\"required\"","","   },","","   messages: {","","             categoria: {","","           required: \"EL campo nombre es requerido!\"","","       },","","       tipo: {","","           required: \"El tipo de promocion es obligatorio\"","","       },","","       estado:{","","           required:\"El titulo es obligatorio\"","","       },","","       ciudad:{","","           required:\"Ladescripcion es obligatoria\"","","       },","","       start:{","","           required:\"Indique fecha de creacion\"","","       },","","       municipio:{","","           required:\"Indique fecha caducidad\"","","       },","         end:{","           required:\"Indique un descuento\"","       }","","   },","","   errorPlacement: function (error, element) {","","       toastr.error(\"Dato invalido\");","","        element.before(error);","","       //$(element).css(\"background\",\"pink\");","","       $(element).focus();","","       ","","     ","","   }","","});","","});","","    </script>","","","<% end %>","<!-- Fin Reporte -->","",""],"id":1}]]},"ace":{"folds":[],"scrolltop":10578,"scrollleft":0,"selection":{"start":{"row":642,"column":0},"end":{"row":642,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":621,"state":"js-start","mode":"ace/mode/html_ruby"}},"timestamp":1512559425521,"hash":"53c67c47f6810ff4c556b014378b4317e11167b6"}